<app-base-page-layout pageTitle="Consumer Grievance">
  <!-- Topic 1: Consumer Complaints Analysis Report -->
  <app-topic-section title="Consumer Complaints Analysis Report - Comparative Analysis of Consumer Complaints – Before vs After Smart Meter Installation" [topicNumber]="1" (opened)="onTopicSectionOpened($event)">
    <div class="space-y-4">
      <h3 class="text-md font-semibold" [style.color]="'var(--text-primary)'">1.1 Executive Summary</h3>
      <app-data-table [data]="getComplaintComparisonSummaryWithIds()" [columns]="complaintComparisonColumns"></app-data-table>
    </div>
    <div class="space-y-4">
      <h3 class="text-md font-semibold" [style.color]="'var(--text-primary)'">1.1 Category-Wise Complaint Analysis</h3>
      <app-data-table [data]="getComplaintCategoriesWithIds()" [columns]="complaintCategoryColumns"></app-data-table>
    </div>
    <div class="space-y-4">
      <h3 class="text-md font-semibold" [style.color]="'var(--text-primary)'">1.2 Monthly Complaint Trend (Before vs After)</h3>
      <app-data-table [data]="getMonthlyComplaintTrendsWithIds()" [columns]="monthlyComplaintTrendColumns"></app-data-table>
      <app-chart-placeholder [title]="'Monthly Complaint Trend Comparison'" [type]="'line'" [data]="monthlyComplaintTrends"></app-chart-placeholder>
    </div>
    <div class="space-y-4">
      <h3 class="text-md font-semibold" [style.color]="'var(--text-primary)'">1.3 Root Cause Analysis (Post Smart Metering)</h3>
      <app-data-table [data]="getRootCauseAnalysisWithIds()" [columns]="rootCauseAnalysisColumns"></app-data-table>
    </div>
    <app-insights-card [insights]="[
      'Complaints related to billing disputes have decreased by XX%, validating the smart meter accuracy.',
      'New types of complaints emerged post-installation: relay disconnections, app recharge confusion, communication failures.',
      'High SLA compliance rate (>XX%) post-smart metering, showing faster resolution via backend analytics.'
    ]"></app-insights-card>
  </app-topic-section>

  <!-- Topic 2: Complaint Resolution Time Analysis Report -->
  <app-topic-section title="Complaint Resolution Time Analysis Report - Complaint Resolution Time Analysis – Categorized by Complaint Type" [topicNumber]="2" (opened)="onTopicSectionOpened($event)">
    <app-summary-tiles [data]="resolutionTimeSummary"></app-summary-tiles>
    <div class="space-y-4">
      <h3 class="text-md font-semibold" [style.color]="'var(--text-primary)'">2.1 Complaint Type-wise Resolution Time Analysis</h3>
      <app-data-table [data]="getResolutionTimeByTypeWithIds()" [columns]="resolutionTimeByTypeColumns"></app-data-table>
    </div>
    <div class="space-y-4">
      <h3 class="text-md font-semibold" [style.color]="'var(--text-primary)'">2.2 Complaint Resolution Time Distribution</h3>
      <app-data-table [data]="getResolutionTimeDistributionWithIds()" [columns]="resolutionTimeDistributionColumns"></app-data-table>
    </div>
    <app-insights-card [insights]="[
      'Most power supply-related complaints were resolved within SLA using remote tools or field staff alerts.',
      'Tamper alert-related complaints took longer due to need for physical inspection.',
      'Billing disputes often exceed SLA due to manual data correction & verification.'
    ]"></app-insights-card>
  </app-topic-section>
</app-base-page-layout>
